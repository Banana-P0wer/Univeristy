<- [[9.4.2.8]]
## **📌 1. Настройка маршрутизатора R2 в качестве DHCP-сервера**

📌 **Шаг 1. Резервируем первые 10 адресов в пуле DHCP**  
**Где выполняем?**  
✅ **На R2 (DHCP-сервер)**  

```bash
enable
configure terminal
ip dhcp excluded-address 192.168.10.1 192.168.10.10
ip dhcp excluded-address 192.168.30.1 192.168.30.10
exit
write memory
```
✅ **Теперь первые 10 адресов из диапазона не будут выдаваться клиентам.**

---

📌 **Шаг 2. Создаём DHCP-пул для сети R1 (LAN 192.168.10.0/24)**  
**Где выполняем?**  
✅ **На R2**  

```bash
enable
configure terminal
ip dhcp pool R1-LAN
network 192.168.10.0 255.255.255.0
default-router 192.168.10.1
dns-server 192.168.20.254
exit
write memory
```
✅ **Теперь маршрутизатор R2 будет раздавать IP-адреса клиентам сети R1.**

---

📌 **Шаг 3. Создаём DHCP-пул для сети R3 (LAN 192.168.30.0/24)**  
**Где выполняем?**  
✅ **На R2**  

```bash
enable
configure terminal
ip dhcp pool R3-LAN
network 192.168.30.0 255.255.255.0
default-router 192.168.30.1
dns-server 192.168.20.254
exit
write memory
```
✅ **Теперь маршрутизатор R2 будет раздавать IP-адреса клиентам сети R3.**

---

## **📌 2. Настройка ретрансляции DHCP на R1 и R3**
Маршрутизаторы **R1 и R3 не могут напрямую передавать DHCP-запросы**, поэтому их нужно настроить как **агентов ретрансляции**.

📌 **Шаг 1. Настроим R1 как DHCP-реле**  
**Где выполняем?**  
✅ **На R1**  

```bash
enable
configure terminal
interface GigabitEthernet0/0
ip helper-address 10.1.1.2
exit
write memory
```
✅ **Теперь DHCP-запросы от клиентов R1 будут перенаправляться на R2.**

---

📌 **Шаг 2. Настроим R3 как DHCP-реле**  
**Где выполняем?**  
✅ **На R3**  

```bash
enable
configure terminal
interface GigabitEthernet0/0
ip helper-address 10.2.2.2
exit
write memory
```
✅ **Теперь DHCP-запросы от клиентов R3 будут перенаправляться на R2.**

---

## **📌 3. Настройка маршрутизатора R2 как DHCP-клиента**
📌 **Шаг 1. Настроим R2 на получение IP через DHCP**  
**Где выполняем?**  
✅ **На R2**  

```bash
enable
configure terminal
interface GigabitEthernet0/1
ip address dhcp
no shutdown
exit
write memory
```
✅ **Теперь R2 будет получать IP-адрес автоматически.**

---

## **📌 4. Переключение IP-адреса на PC1 и PC2 в режим DHCP**
📌 **Шаг 1. Изменяем настройки сетевых адаптеров на ПК**  
**Где выполняем?**  
✅ **На PC1 и PC2 в Packet Tracer**  

1. Открываем **Desktop** → **IP Configuration**  
2. В разделе **IP Addressing**:
   - Если установлено `Static`, переключаем в **`DHCP`**.
   - Дожидаемся получения IP-адреса от сервера.

✅ **Если всё работает, ПК получит IP-адрес из сети 192.168.10.0/24 (PC1) и 192.168.30.0/24 (PC2).**

---

## **📌 5. Проверка DHCP**
📌 **Шаг 1. Проверяем, выдал ли R2 IP-адреса клиентам**  
**Где выполняем?**  
✅ **На R2**  

```bash
show ip dhcp binding
```
✅ **Если всё настроено правильно, ты увидишь список назначенных IP-адресов.**

📌 **Шаг 2. Проверяем, что ПК получили IP-адрес через DHCP**  
**Где выполняем?**  
✅ **На PC1 и PC2 в Packet Tracer**  
1. Открываем **Desktop** → **IP Configuration**  
2. Должен быть получен **IP-адрес из диапазона DHCP**.

📌 **Шаг 3. Проверяем связь между PC1 и PC2**  
**Где выполняем?**  
✅ **На PC1 и PC2**  

```bash
ping 192.168.30.X  # Пингуем другой компьютер
```
✅ **Если пинг проходит – DHCP работает.**

<<- [[11.2.3.6]]
# **๐ฅ ะะพะปะฝะฐั ะฝะฐัััะพะนะบะฐ VLAN, PVST+ ะธ PortFast/BPDU Guard**

## **๐ 1. ะงัะพ ะผั ะฝะฐัััะฐะธะฒะฐะตะผ?**
ะ ััะพะน ะปะฐะฑะพัะฐัะพัะฝะพะน ัะฐะฑะพัะต ะผั:
1. **ะกะพะทะดะฐะดะธะผ VLAN** ะธ ะฝะฐัััะพะธะผ ะดะพัััะฟะฝัะต (access) ะธ ััะฐะฝะบะพะฒัะต (trunk) ะฟะพััั.
2. **ะะฐัััะพะธะผ ะฟัะพัะพะบะพะป spanning-tree (PVST+)**, ััะพะฑั ะธะทะฑะตะถะฐัั ะฟะตัะตะปั ะธ ะฑะฐะปะฐะฝัะธัะพะฒะฐัั ะฝะฐะณััะทะบั.
3. **ะะบะปััะธะผ PortFast ะธ BPDU Guard**, ััะพะฑั ััะบะพัะธัั ะทะฐะณััะทะบั ะฟะพััะพะฒ ะธ ะทะฐัะธัะธัั ัะตัั.
4. **ะัะพะฒะตัะธะผ ะฝะฐัััะพะนะบะธ** ะธ ัะฑะตะดะธะผัั, ััะพ ะฒัั ัะฐะฑะพัะฐะตั.

---

## **๐ 2. ะกะพะทะดะฐะฝะธะต VLAN ะฝะฐ ะฒัะตั ะบะพะผะผััะฐัะพัะฐั (S1, S2, S3)**  
๐ **ะะตัะตะด ะฝะฐะทะฝะฐัะตะฝะธะตะผ ะฟะพััะพะฒ ัะฝะฐัะฐะปะฐ ัะพะทะดะฐัะผ VLAN!** ะญัะพ ะฝัะถะฝะพ ัะดะตะปะฐัั **ะฝะฐ ะบะฐะถะดะพะผ ะบะพะผะผััะฐัะพัะต**.

### **ะะฐ S1, S2, S3 ะฒัะฟะพะปะฝะธัั:**
```bash
enable
configure terminal
vlan 10
name Sales
vlan 20
name Development
vlan 30
name Guest
vlan 40
name HR
vlan 50
name IT
vlan 60
name Finance
vlan 70
name Marketing
vlan 80
name Support
vlan 99
name Native
exit
```
โ **ะงัะพ ะดะตะปะฐะตั ััะฐ ะบะพะผะฐะฝะดะฐ?**  
- ะกะพะทะดะฐัั VLAN 10-80 ะดะปั ัะฐะทะฝัั ะพัะดะตะปะพะฒ.
- VLAN 99 โ **native VLAN** (ะดะปั ัะฟัะฐะฒะปะตะฝะธั ััะฐัะธะบะพะผ trunk-ะฟะพััะพะฒ).
- **ะะฐะถะฝะพ!** VLAN ะดะพะปะถะฝั ะฑััั **ัะพะทะดะฐะฝั ะฝะฐ ะฒัะตั ะบะพะผะผััะฐัะพัะฐั (S1, S2, S3)**, ะธะฝะฐัะต ัะฒัะทั ะผะตะถะดั ะฝะธะผะธ ะฝะต ะฑัะดะตั ัะฐะฑะพัะฐัั.

### **ะัะพะฒะตัะบะฐ VLAN**
```bash
show vlan brief
```
โ **ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**  
- **VLAN 10-80 ะฟัะธัััััะฒััั**
- **VLAN 1 ะฝะต ะธัะฟะพะปัะทัะตััั ะดะปั ะฟะพััะพะฒ**

---

## **๐ฏ 3. ะะฐะทะฝะฐัะตะฝะธะต ะฟะพััะพะฒ ะฒ VLAN (Access-ะฟะพััั ะดะปั ะะ)**  
๐ **ะะฐะถะดัะน ะบะพะผะฟัััะตั ะดะพะปะถะตะฝ ะฟะพะดะบะปััะฐัััั ะบ ะพะฟัะตะดะตะปัะฝะฝะพะผั VLAN. ะะฐัััะพะธะผ ะดะปั ััะพะณะพ access-ะฟะพััั.**

### **ะะฐ S1 (ะดะปั PC3, VLAN 30)**
```bash
enable
configure terminal
interface FastEthernet 0/6
switchport mode access
switchport access vlan 30
no shutdown
exit
```
๐ **ะงัะพ ะดะตะปะฐะตั ััะฐ ะบะพะผะฐะฝะดะฐ?**  
โ ะะตัะตะฒะพะดะธั ะฟะพัั `F0/6` ะฒ **ัะตะถะธะผ ะดะพัััะฟะฐ (Access Mode)**  
โ ะัะธะฒัะทัะฒะฐะตั ะฟะพัั ะบ **VLAN 30**  
โ ะะบะปััะฐะตั ะฟะพัั  

### **ะะฐ S2 (ะดะปั PC2, VLAN 20)**
```bash
enable
configure terminal
interface FastEthernet 0/18
switchport mode access
switchport access vlan 20
no shutdown
exit
```
๐ **ะงัะพ ะดะตะปะฐะตั ััะฐ ะบะพะผะฐะฝะดะฐ?**  
โ ะะพัั `F0/18` ััะฐะฝะพะฒะธััั **access-ะฟะพััะพะผ**  
โ ะัะธะฒัะทะฐะฝ ะบ **VLAN 20**  

### **ะะฐ S3 (ะดะปั PC1, VLAN 10)**
```bash
enable
configure terminal
interface FastEthernet 0/11
switchport mode access
switchport access vlan 10
no shutdown
exit
```

---

## **๐ 4. ะะฐัััะพะนะบะฐ ััะฐะฝะบะพะฒัั (trunk) ะฟะพััะพะฒ**  
๐ **Trunk-ะฟะพััั ะฟะตัะตะดะฐัั ััะฐัะธะบ VLAN ะผะตะถะดั ะบะพะผะผััะฐัะพัะฐะผะธ.**  

### **ะะฐ S1**
```bash
enable
configure terminal
interface FastEthernet 0/1
switchport mode trunk
switchport trunk native vlan 99
switchport trunk allowed vlan 10,20,30,40,50,60,70,80
exit

interface FastEthernet 0/2
switchport mode trunk
switchport trunk native vlan 99
switchport trunk allowed vlan 10,20,30,40,50,60,70,80
exit
```

### **ะะฐ S2**
```bash
enable
configure terminal
interface FastEthernet 0/1
switchport mode trunk
switchport trunk native vlan 99
switchport trunk allowed vlan 10,20,30,40,50,60,70,80
exit

interface FastEthernet 0/3
switchport mode trunk
switchport trunk native vlan 99
switchport trunk allowed vlan 10,20,30,40,50,60,70,80
exit
```

### **ะะฐ S3**
```bash
enable
configure terminal
interface FastEthernet 0/2
switchport mode trunk
switchport trunk native vlan 99
switchport trunk allowed vlan 10,20,30,40,50,60,70,80
exit

interface FastEthernet 0/3
switchport mode trunk
switchport trunk native vlan 99
switchport trunk allowed vlan 10,20,30,40,50,60,70,80
exit
```

---

## **๐ 5. ะะฐัััะพะนะบะฐ STP (Spanning Tree Protocol, PVST+)**
๐ **STP ะฟัะตะดะพัะฒัะฐัะฐะตั ะฟะตัะปะธ ะฒ ัะตัะธ.** ะั ะธัะฟะพะปัะทัะตะผ **PVST+**, ะบะพัะพััะน ัะพะทะดะฐัั **ะพัะดะตะปัะฝะพะต spanning-tree ะดะปั ะบะฐะถะดะพะณะพ VLAN**.

### **ะะฐ S1 (ะบะพัะฝะตะฒะพะน ะดะปั VLAN 10, 30, 50, 70)**
```bash
enable
configure terminal
spanning-tree vlan 10,30,50,70 root primary
exit
```

### **ะะฐ S2 (ัะตะทะตัะฒะฝัะน ะบะพัะฝะตะฒะพะน ะดะปั ะฒัะตั VLAN)**
```bash
enable
configure terminal
spanning-tree vlan 1,10,20,30,40,50,60,70,80,99 root secondary
exit
```

### **ะะฐ S3 (ะบะพัะฝะตะฒะพะน ะดะปั VLAN 20, 40, 60, 80)**
```bash
enable
configure terminal
spanning-tree vlan 20,40,60,80 root primary
exit
```

๐ **ะงัะพ ะดะตะปะฐัั ััะธ ะบะพะผะฐะฝะดั?**  
โ S1 โ **Root Bridge ะดะปั VLAN 10, 30, 50, 70**  
โ S3 โ **Root Bridge ะดะปั VLAN 20, 40, 60, 80**  
โ S2 โ **ัะตะทะตัะฒะฝัะน Root Bridge (Secondary Root) ะดะปั ะฒัะตั VLAN**  

---

## **โก 6. ะะบะปััะตะฝะธะต PortFast ะธ BPDU Guard**  
๐ **PortFast ััะบะพััะตั ะทะฐะณััะทะบั ะฟะพััะพะฒ. BPDU Guard ะทะฐัะธัะฐะตั ัะตัั ะพั ัะปััะฐะนะฝัั ะฟะพะดะบะปััะตะฝะธะน ะฝะพะฒัั ะบะพะผะผััะฐัะพัะพะฒ.**

### **ะะฐ S1 (PC3, ะฟะพัั F0/6)**
```bash
enable
configure terminal
interface FastEthernet 0/6
spanning-tree portfast
spanning-tree bpduguard enable
exit
```

### **ะะฐ S2 (PC2, ะฟะพัั F0/18)**
```bash
enable
configure terminal
interface FastEthernet 0/18
spanning-tree portfast
spanning-tree bpduguard enable
exit
```

### **ะะฐ S3 (PC1, ะฟะพัั F0/11)**
```bash
enable
configure terminal
interface FastEthernet 0/11
spanning-tree portfast
spanning-tree bpduguard enable
exit
```

---

## **โ 7. ะัะพะฒะตัะบะฐ ะบะพะฝัะธะณััะฐัะธะธ**
### **ะัะพะฒะตัะบะฐ VLAN**
```bash
show vlan brief
```
### **ะัะพะฒะตัะบะฐ ััะฐะฝะบะพะฒัั ะฟะพััะพะฒ**
```bash
show interfaces trunk
```
### **ะัะพะฒะตัะบะฐ STP**
```bash
show spanning-tree vlan 10
```
### **ะัะพะฒะตัะบะฐ PortFast ะธ BPDU Guard**
```bash
show running-config | include spanning-tree
```

---

# **๐ ะัะฒะพะดั**
โ **VLAN ัะฐะฑะพัะฐัั, ะฟะพััั ะฟัะธะฒัะทะฐะฝั ะฟัะฐะฒะธะปัะฝะพ**  
โ **ะขัะฐะฝะบะพะฒัะต ะฟะพััั ะฟะตัะตะดะฐัั VLAN-ััะฐัะธะบ**  
โ **STP ะฟัะตะดะพัะฒัะฐัะฐะตั ะฟะตัะปะธ, ะฑะฐะปะฐะฝัะธััะตั ะฝะฐะณััะทะบั**  
โ **PortFast ััะบะพััะตั ะฟะพะดะบะปััะตะฝะธะต, BPDU Guard ะทะฐัะธัะฐะตั ัะตัั**  

ะขะตะฟะตัั ััะฐ ัะฟะฐัะณะฐะปะบะฐ **ัะตัะฐะตั ะฒัั ะทะฐะดะฐะฝะธะต ะฝะฐ 100%!** ๐
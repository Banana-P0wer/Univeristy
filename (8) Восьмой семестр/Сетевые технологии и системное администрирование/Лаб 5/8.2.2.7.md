<- [[7.3.1.8]]
# **Шпаргалка по настройке OSPFv2 в Cisco Packet Tracer (обновлённая топология)**

## **Часть 1. Настройка маршрутизации OSPFv2**

### **1. Что такое OSPF?**
**OSPF (Open Shortest Path First)** – это **протокол динамической маршрутизации**, использующий алгоритм **Dijkstra** для поиска кратчайшего пути между сетями. Работает внутри одной **автономной системы (AS)** и поддерживает **разделение на области (Area 0 – backbone)**.

### **2. Основные особенности OSPF**
✅ **Работает по алгоритму SPF (Shortest Path First)** – выбирает кратчайший маршрут по стоимости (**cost**).  
✅ **Быстрая конвергенция** – быстро адаптируется к изменениям сети.  
✅ **Обмен только изменёнными маршрутами** – снижает нагрузку на сеть.  
✅ **Поддержка VLSM и CIDR** – позволяет использовать различные маски подсетей.  
✅ **Маршрутизаторы взаимодействуют через hello-пакеты** – для установления соседства.  

---

## **Исходные данные**

В этой топологии используются следующие сети:

- **Локальные сети (LAN):**
  - **PC1 (172.16.1.2/24)** через **R1 (172.16.1.1/24)**
  - **PC2 (172.16.2.2/24)** через **R2 (172.16.2.1/24)**
  - **PC3 (192.168.1.2/24)** через **R3 (192.168.1.1/24)**

- **Межмаршрутизаторные соединения:**
  - **R1 ↔ R2:** 172.16.3.0/30 (R1: 172.16.3.1, R2: 172.16.3.2)
  - **R2 ↔ R3:** 192.168.10.8/30 (R2: 192.168.10.9, R3: 192.168.10.10)
  - **R1 ↔ R3:** 192.168.10.4/30 (R1: 192.168.10.5, R3: 192.168.10.6)

---

## **Шаг 1. Настройка OSPF на маршрутизаторах R1, R2 и R3**

### **1. Включение OSPF и настройка идентификатора маршрутизатора**
На **R1**:
```bash
enable
configure terminal
router ospf 10
router-id 1.1.1.1
network 172.16.1.0 0.0.0.255 area 0
network 172.16.3.0 0.0.0.3 area 0
network 192.168.10.4 0.0.0.3 area 0
passive-interface G0/0
end
write memory
```

На **R2**:
```bash
enable
configure terminal
router ospf 10
router-id 2.2.2.2
network 172.16.2.0 0.0.0.255 area 0
network 172.16.3.0 0.0.0.3 area 0
network 192.168.10.8 0.0.0.3 area 0
passive-interface G0/0
end
write memory
```

На **R3**:
```bash
enable
configure terminal
router ospf 10
router-id 3.3.3.3
network 192.168.1.0 0.0.0.255 area 0
network 192.168.10.4 0.0.0.3 area 0
network 192.168.10.8 0.0.0.3 area 0
passive-interface G0/0
end
write memory
```

🔹 **Что означают эти команды?**  
- **router ospf 10** – включаем процесс OSPF с идентификатором 10.  
- **router-id X.X.X.X** – задаём уникальный ID маршрутизатора.  
- **network X.X.X.X 0.0.0.X area 0** – объявляем сети в OSPF в зоне **area 0**.  
- **passive-interface G0/0** – выключаем рассылку OSPF-пакетов в локальной сети (на интерфейсе, соединённом с ПК).  

---

## **Шаг 2. Проверка работы OSPF**

### **1. Проверка таблицы маршрутизации**
```bash
show ip route ospf
```
🔹 **Ожидаемый результат:**  
Должны появиться маршруты **ко всем сетям**.

### **2. Проверка соседства маршрутизаторов**
```bash
show ip ospf neighbor
```
🔹 **Ожидаемый результат:**  
Отображаются **соседи OSPF** (R1 ↔ R2, R2 ↔ R3, R1 ↔ R3).

### **3. Проверка соединений между ПК**
На **PC1**:
```bash
ping 172.16.2.2  # Проверка связи с PC2
ping 192.168.1.2  # Проверка связи с PC3
```
На **PC3**:
```bash
ping 172.16.1.2  # Проверка связи с PC1
```
🔹 **Если `ping` проходит** – маршрутизация работает.

---

## **Часть 2. Проверка конфигураций**

Каждый компьютер должен **успешно отправлять эхо-запросы (ping) к двум другим**.  
Если `ping` не проходит, выполняем диагностику:

### **1. Проверяем таблицу маршрутизации**
```bash
show ip route
```
🔹 Если сети нет – проверяем **конфигурацию OSPF**.

### **2. Проверяем соседство OSPF**
```bash
show ip ospf neighbor
```
🔹 Если **сосед отсутствует** – проблема с `network` или физическим соединением.

### **3. Проверяем состояние интерфейсов**
```bash
show ip interface brief
```
🔹 Если интерфейс **"administratively down"**, включаем его:
```bash
interface G0/0
no shutdown
```

### **4. Проверяем OSPF-события**
```bash
debug ip ospf events
```
🔹 Если маршруты не обновляются – возможно, проблема с `network` в конфигурации OSPF.

[[9.2.1.10]] ->>>